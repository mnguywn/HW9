<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Setlist 2021</title>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    </head>
    <body>
        <form onsubmit="return false"> Sort by Genre:
            <select id="sortChoices">
                <option id="Default">All Genres</option>
                <option id="Rap">Rap</option>
                <option id="Pop">Pop</option>
                <option id="KPop">KPop</option>
                <option id="Rock">Rock</option>
                <option id="Hip Hop">Hip Hop</option>
                <option id="RnB">RnB</option>
                <option id="Alternative">Alternative</option>
                <option id="Indie">Indie</option>
            </select>
            <button type="submit" id="sort" value="Filter">Filter by Genre</button>
        </form>

        <div id="playlist"></div>
        <script language="javascript">

            $(document).ready(sort(0));
            var allGnres=["All Genres","Rap","Pop","KPop","Rock","Hip Hop","Rock","RnB","Alternative","Indie"];

            function specificGenre(findGenre, arr){
                if(findGenre == "All Genres"){
                    return true;
                }
                for(var j = 0; j <arr.length; j++){
                    if(findGenres == arr[j]){
                        return true;
                    }
                }
                return false;
            }
            function sort(genreSort){
                $.getJSON('setlist.json', function(info){
                    infoString=JSON.stringify(info);
                    infoArray=JSON.parse(infoString);
                    infoData="";

                    for (var i = 0; i<10; i++) {
                        if(specificGenre(allGenres[genreSort], infoArray[i].genre)){
                            infoData += "<div class='info'>" + infoArray[i].title + "</div>";
                            indoData += "div class='info'>" + "Artists: " + infoArray[i].artists + "<br/>";
                            infoData += "Genre: ";

                            for(var k = 0; k <infoArray[i].genre.length; k++){
                                infoData += infoArray[i].genre[k];
                            }
                            infoData += "<br/>";
                            infoData += "Year: " + infoArray[i].yearReleased + "</div>";
                            infoData += "<hr>";
                        }
                    }
                document.getElementById("playlist").innerHTML = infoData;
                }
                )
            }
        </script>
        <script language="javascript">
            $('#sort').on('click', function() {
                if($("#sortChoices").prop('selectedIndex') == 0){
                    sort(0);
                }
                else{
                    sort($("#sortChoices").prop('selectedIndex'));
                }
            });
        </script>
    </body>
</html>